<div class="group-input-fields-content" data-callback-render="render_top_banner">
  <div class="form-group">
    <label><%= t('camaleon_cms.admin.custom_field.fields.image') %>:</label>
    <div class="input-group">
      <input data-dimension="<%= field.options[:dimension] %>" data-versions="<%= field.options[:versions] %>" data-thumb_size="<%= field.options[:thumb_size] %>" type="url" name="<%= field_name %>[<%= field.slug %>][values][][image]" class="data-error-place-parent image_field form-control <%= "required" if field.options[:required].to_s.to_bool %>"/>
      <span class="input-group-addon btn_upload" onclick="load_upload_image_field($(this).prev());"><i class="fa fa-upload"></i> <%= t('camaleon_cms.admin.button.upload_image')%> <%= "(#{field.get_option('dimension')})" if field.get_option('dimension').present? %></span>
    </div>
  </div>
  <div class="clearfix">
    <div class="form-group">
      <label><%= t('camaleon_cms.admin.custom_field.fields.title') %>: </label>
      <input placeholder="<%= t('camaleon_cms.admin.custom_field.fields.title_placeholder') %>" type="text" name="<%= field_name %>[<%= field.slug %>][values][][title]" class="title_field translatable form-control"/>
    </div>
    <div class="form-group">
      <label><%= t('camaleon_cms.admin.custom_field.fields.description') %>: </label>
      <textarea placeholder="<%= t('camaleon_cms.admin.custom_field.fields.description_placeholder') %>" name="<%= field_name %>[<%= field.slug %>][values][][descr]" class="descr_field form-control is_translate"></textarea>
    </div>
  </div>
</div>
<script>
  function render_top_banner(panel, values){
    values = values && typeof values == 'object' ? values : $.parseJSON(values || '{}');
    panel.find('.title_field').val(values['title']);
    panel.find('.image_field').val(values['image']);
    panel.find('.translatable').Translatable(ADMIN_TRANSLATIONS);

    initCustomFieldEditor(panel.find('.descr_field'), values['descr']);
  }

if (!initCustomFieldEditor) {
  function initCustomFieldEditor(field, value) {
    if (field) {
      field.val(value);
      var id = "t_" + Math.floor((Math.random() * 100000) + 1) + "_area";
      var textarea = field.attr('id', id);

      if (textarea.hasClass('is_translate')) {
        textarea.addClass('translatable').Translatable(ADMIN_TRANSLATIONS);
        var inputs = textarea.data("translation_inputs");
        if (inputs) { // multiples languages
          for (var lang in inputs) {
            tinymce.init(cama_get_tinymce_settings({
              selector: '#' + inputs[lang].attr("id"),
              height: 120
            }));
          }
          return;
        }
      }
      tinymce.init(cama_get_tinymce_settings({
        selector: '#' + id,
        height: 120
      }));
    }
  }
}
</script>